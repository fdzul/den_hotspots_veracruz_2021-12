---
title: "Modelo estratégico de focalización de dengue en áreas urbanas"
author: "Felipe Antonio Dzul Manzanilla"
institute: "SESVER"
date: "2021/12/10 (updated: `r Sys.Date()`)"
output:
  xaringan::moon_reader:
    css: ["xaringan-themer.css"]
    nature:
      highlightLines: true
      countIncrementalSlides: false
---

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
style_mono_light()


```

```{r xaringan-fit-screen, echo=FALSE}
xaringanExtra::use_fit_screen()
```

```{r xaringanExtra, echo = FALSE}
xaringanExtra::use_progress_bar(color = "#0051BA", location = "top")
```

```{r xaringan-tachyons, echo=FALSE}
xaringanExtra::use_tachyons()
```

```{r share-again, echo=FALSE}
xaringanExtra::use_share_again()
```





# [Felipe Dzul Manzanilla](https://fdzul.github.io/web_site_fadm/)


### Resumen Biográfico

### Educación

### Experiencia Laboral

### Artículo Publicados

### Libros y manuales

### Paquetes, dashboards, bookdowns in R

---
## Temas 

### a) Línea de tiempo del programa.

### b) Definición de hotpots. 

### c) Hotspots de la enfermedad y Hotspots del vector.

### d) Clusters de casos de dengue y Cadenas de transmisión.

### f) Modelo estratégico de focalización de dengue en áreas urbanas

---

### Ciclo de Vida del Programa de Prevención y Control del Dengue

```{r, dpi=300,echo=FALSE, fig.align ="center", out.width = "100%"}
DiagrammeR::grViz("digraph {

  # graph definitions
  graph [layout = dot, rankdir = TB]
  
  # node definitions
  node [shape = circle, style = filled, color = grey,
  fixedsize = true, width = 2] 
  
  ###########
  prog_den [label = 'Programa de Dengue',  fillcolor =  'DodgerBlue', color = 'white', fontcolor = 'black']
  brote [label = 'Brote',  fillcolor = 'DarkOrange', color = 'white', fontcolor = 'black']
   cp [label = 'Control de Probables',  fillcolor = 'DarkOrange', color = 'white', fontcolor = 'black']
   node [shape = circle, style = filled, color = grey] 
    irs [label = 'Rociado Residual',  fillcolor = 'DarkOrange', color = 'white', fontcolor = 'black']
   cl [label = 'Control Larvario',  fillcolor = 'DarkOrange', color = 'white', fontcolor = 'black']
   ovitraps [label = 'Ovitrampas',  fillcolor = 'DarkOrange', color = 'white', fontcolor = 'black']
  adult [label = 'Colecta de Adultos',  fillcolor = 'DarkOrange', color = 'white', fontcolor = 'black']
  enc_ver [label = 'Encuesta Verificación',  fillcolor = 'DarkOrange', color = 'white', fontcolor = 'black']
   plat [label = 'Plataforma',  fillcolor = 'DarkOrange', color = 'white', fontcolor = 'black']
  
  #########
  node [shape = rectangle, style = filled, color = grey, fixedsize = true, width = 2.5] 
  hotspots [label = 'Hotspots',  fillcolor = 'DarkOrange', color = 'white', fontcolor = 'black']
  act [label = 'Casos Actuales',  fillcolor = 'DarkOrange', color = 'white', fontcolor = 'black']
 
  epi [label = 'Vigilancia Epidemiológica',  fillcolor = 'SeaGreen', color = 'white', fontcolor = 'black']
  ent [label = 'Vigilancia Entomológica',  fillcolor = 'SeaGreen', color = 'white', fontcolor = 'black']
 ind [label = 'Indicadores',  fillcolor = 'SeaGreen', color = 'white', fontcolor = 'black']
  ###################
  prog_den -> {epi, ent}[penwidth = 4]
  
  
  act -> {
  brote[arrowhead = crow, arrowtail = box, color = 'Maroon']
  cp[arrowhead = crow, arrowtail = box, color = 'Maroon']
  } -> plat[penwidth = 4]
  epi -> {act, hotspots}[penwidth = 4]
  hotspots -> {
  cl[arrowhead = crow, arrowtail = box, color = 'Maroon']
  irs[arrowhead = crow, arrowtail = box, color = 'Maroon']
  } -> plat[penwidth = 4]
  ent -> {adult, 
  ovitraps,
  enc_ver} -> plat[penwidth = 4]  
  plat -> ind[penwidth = 4]
  ind -> prog_den[penwidth = 4]
  #ind -> {enc_ver, ovitraps, adult, cl, irs, cp, brote}

 
 
 
  }", 
  height = 600)

```

---
### Línea de tiempo de la información epidemiológica & entomológica

```{r,dpi=300, echo=FALSE, fig.align ="center", out.width = "100%"}
library(timevis)
a <- timevis::timevis(data = data.frame(start = c("2008-01-01", 
                                                  "2011-01-01",
                                                  "2017-01-01",
                                                  "2017-01-01",
                                                  "2008-01-01",
                                                  "2021-01-01", 
                                                  "2021-03-01"),
                                        end = c("2021-03-31", 
                                                "2021-03-31", 
                                                "2019-12-31",
                                                "2019-12-31", 
                                                "2020-12-31", 
                                                "2021-03-31", 
                                                "2021-03-31"),
                          #style = c("color: darkblue; font-size: 15px; border-color: darkblue; border: 2px solid darkblue;"),
                          content = c("Vigilancia Epidemiológica Pasiva", 
                                      "Vigilancia Entomológica con Ovitrampas", 
                                      "Vigilancia Entomológica con Adultos",
                                      "Entomovirología",
                                      "Hotspots Históricos",
                                      "Actuales (clusters de casos y cadenas de transmisión)",
                                      "Transmisión Activa (Identificación de cadenas de transmisión: knox test)"),
                          #type = c("background"),
                          style = c("text-align: center; font-weight: bold; color: black; font-size: 15px; border-color: darkred; border: 2px solid black; background-color: firebrick;",
                                    "text-align: center; font-weight: bold; color: black; font-size: 15px; border-color: darkblue; border: 2px solid black; background-color: dodgerblue;",
                                    "text-align: center; font-weight: bold; color: black; font-size: 15px; border-color: darkblue; border: 2px solid black; background-color: dodgerblue;", 
                                    "text-align: center; font-weight: bold; color: black; font-size: 15px; border-color: darkgreen; border: 2px solid black; background-color: darkgreen;",
                                    "text-align: center; font-weight: bold; color: black; font-size: 15px; border-color: darkorange; border: 2px solid black; background-color: darkorange;", 
                                    "text-align: left; font-weight: bold; color: black; font-size: 15px; border-color: darkorange; border: 1.5px solid black; background-color: darkorange;", 
                                    "text-align: righ; font-weight: bold; color: black; font-size: 15px; border-color: darkorange; border: 1px solid gray; background-color: darkorange;"),
                          group = c(1, 2, 2,3, 4, 4,4)),
        groups = data.frame(id = 1:4, 
                            content = c("Paciente", 
                                        "Vector",
                                        "Virus-Vector",
                                        "Análisis espacial"),
                            style = c("text-align: center; font-weight: bold; color: black; font-size: 20px; border-color: darkred; border: 2px solid black; background-color: firebrick;",
                                      "text-align: center; font-weight: bold; color: black; font-size: 20px; border-color: darkblue; border: 2px solid black; background-color: dodgerblue;",
                                      "text-align: center; font-weight: bold; color: black; font-size: 20px; border-color: darkgreen; border: 2px solid black; background-color: darkgreen;",
                                      "vertical-align: middle; text-align: center; font-weight: bold; color: black; font-size: 20px; border-color: darkorange; border: 2px solid black; background-color: darkorange;")))

a


style <- "
.vis-time-axis { 
background-color: lightgray;
backgroud-border: 3px solid #73AD21;
backgroun-opacity; 0.1;
font-weight: bold;
text-align: center;
vertical-align: middle;
border: 1.5px solid #73AD21;
font-size: 15px;}
.vis-odd {
color: blue;
vertical-align: middle;
  }

"
htmltools::html_print(htmltools::tagList(htmltools::tags$style(style), a))

```


---


Algoritmo para el cálculo de los Hotspots (casos)

```{r, dpi=300,echo=FALSE, fig.align ="center", out.width = "100%"}
DiagrammeR::grViz("digraph {

  # graph definitions
  graph [layout = dot, rankdir = TB]
  
  # node definitions
  node [shape = rectangle, style = filled, color = grey] 
  
  # flowchart for hotspots
  sinave [label = 'SINAVE',  fillcolor = 'SeaGreen', color = 'white', fontcolor = 'white']
  denv [label = 'Bases de DENV',  fillcolor = 'SeaGreen', color = 'white', fontcolor = 'white']
  geocode [label = 'Geocodificación',  fillcolor = 'SeaGreen', color = 'white', fontcolor = 'white']
  cases_ageb [label = 'Casos por AGEBs']
  z_score [label = 'Z-score']
  gi [label = 'Estadístico Espacial Local (Gi*)']
  bonferroni [label = 'Corrección de Bonferroni']
  hotspots [label = 'Hotspots', style = filled, color = orange]
  vis [label = 'Visualizacion de los Hotspots']
  
  # flow chart for inegi
  inegi [label = 'INEGI', fillcolor = 'DeepSkyBlue', color = 'white', fontcolor = 'black']
  loc [label = 'Localidades Shapefile', fillcolor = 'DeepSkyBlue', color = 'white', fontcolor = 'black']
  ageb [label = 'AGEB Shapefile', fillcolor = 'DeepSkyBlue', color = 'white', fontcolor = 'black']
  loc_esp [label = 'Localidad de Ínteres', fillcolor = 'DeepSkyBlue', color = 'white', fontcolor = 'black']
  ageb_esp [label = 'AGEBs de la Localidad de Ínteres', fillcolor = 'DeepSkyBlue', color = 'white', fontcolor = 'black']
  mat [label = 'Matriz de Adjacencias', fillcolor = 'DeepSkyBlue', color = 'white', fontcolor = 'black']
  
  # edge definitions with the node IDs
  edge [color = black]
  sinave -> denv -> geocode -> cases_ageb -> z_score -> gi -> bonferroni -> hotspots -> vis
  inegi -> {ageb, loc}
  loc -> loc_esp -> ageb_esp
  ageb -> ageb_esp
  ageb_esp -> mat
  mat -> cases_ageb 
 
  }", 
  height = 650)

```



---
## Definición del Riesgo de Transmisión.
.bg-washed-red.b--dark-red.ba.bw2.br3.shadow-5.ph4.mt5[
**Riesgo Muy Alto**. Áreas definidas como aquellas unidades espaciales (AGEBS) identificadas como hotspots de transmisión de dengue que presentan sobrelape espacial con los hotspots de la abundancia de huevos de *Ae. aegypti* y concordancia espacial con los cluster de transmisión de dengue (Satscan análisis) y las cadenas de transmision (knox test). El sobrelape espacial de los space-time análisis aun no esta implementado. 
]

.bg-salmon.b--orange.ba.bw2.br3.shadow-5.ph4.mt5[
**Riesgo Alto**. Áreas identificadas como hotspots de transmisión de dengue.
]




---

## Definición del Riesgo de Transmisión.

.bg-gold.b--yellow.ba.bw2.br3.shadow-5.ph4.mt5[
**Riesgo Medio**. Áreas identificadas como hotspots de transmisión de la abundancia de Huevos de *Ae. aegypti*.
]

.bg-springgreen.b--green.ba.bw2.br3.shadow-5.ph4.mt5[
**Riesgo Bajo**. Áreas sin hotspots de transmisión de dengue y áreas sin hotspot de la abundancias del vector.
]


---

# Thanks!

- ***email***       :     felipe.dzul.m@gmail.com

- ***celular***     :     228 229 3419

- ***slides***:     https://jolly-edison-c35bbb.netlify.app/

- ***próximo curso***: ***Análisis espacial del dengue en [R](https://cran.r-project.org/) y [Python](https://www.python.org/)***


Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan), & [R Markdown](https://rmarkdown.rstudio.com).
